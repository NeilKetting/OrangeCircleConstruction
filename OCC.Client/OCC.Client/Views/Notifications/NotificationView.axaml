<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:OCC.Client.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="OCC.Client.Views.NotificationView"
             x:DataType="vm:NotificationViewModel"
             Background="{DynamicResource PageBackgroundBrush}">

	<Border CornerRadius="8" Background="{DynamicResource CardBackgroundBrush}" Margin="10" Padding="20">
		<Grid RowDefinitions="Auto, *">
			<!-- Header -->
			<Grid Grid.Row="0" ColumnDefinitions="*, Auto">
				<TextBlock Grid.Column="0" Text="Notifications" FontSize="18" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
				<!-- Settings Icon -->
				<Button Grid.Column="1" Classes="IconBtn" ToolTip.Tip="Notification Settings">
					<PathIcon Data="{StaticResource settings_regular}" Foreground="{DynamicResource TextSecondaryGray}" Width="16" Height="16"/>
				</Button>
			</Grid>

			<!-- Content -->
			<Grid Grid.Row="1" Margin="0,40,0,0">
				
				<!-- Empty State -->
				<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="10" IsVisible="{Binding !HasNotifications}">
					<PathIcon Data="{StaticResource alert_regular}" Width="48" Height="48" Foreground="{DynamicResource TextSecondaryGray}" Opacity="0.5"/>
					<TextBlock Text="No notifications" Foreground="{DynamicResource TextSecondaryGray}" HorizontalAlignment="Center"/>
				</StackPanel>

				<!-- List (Hidden for now) -->
				<ItemsControl ItemsSource="{Binding Notifications}" IsVisible="{Binding HasNotifications}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border Padding="15" Margin="0,0,0,10" Background="{DynamicResource CardBackgroundBrush}" CornerRadius="8" BoxShadow="0 2 4 0 #10000000">
								<Grid ColumnDefinitions="*, Auto">
									<StackPanel Grid.Column="0" Spacing="4">
										<TextBlock Text="{Binding Title}" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
										<TextBlock Text="{Binding Message}" TextWrapping="Wrap" Foreground="{DynamicResource TextSecondaryGray}"/>
										<TextBlock Text="{Binding Timestamp}" Foreground="{DynamicResource TextSecondaryGray}" FontSize="12" Opacity="0.7"/>
									</StackPanel>
									
									<Button Grid.Column="1" Content="Approve"
											Command="{Binding $parent[UserControl].DataContext.ApproveUserCommand}"
											IsVisible="{Binding $parent[UserControl].DataContext.IsAdmin}"
											Classes="Flat" Margin="15,0,0,0" VerticalAlignment="Center"/>
								</Grid>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</Grid>
		</Grid>
	</Border>
	
</UserControl>
